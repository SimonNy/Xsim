# Xsim 
**Xsim** is a tool for simulating radiographic planar images of virtual objects under linear motion. The objects are defined in a 3D-grid with values referring to the material compositions. **Xsim** provides an easy way of examining different X-ray setups for different material compositions. 

## How To Use

Two types of objecs are avalible in the system: 
-user-defined objects such as spheres and boxes generated with the file *generateD.py*.
-.obj files turned to voxels through [binvox](https://www.patrickmin.com/binvox/).

The desired objects are imported and odjusted in the file *loadObject.py*.

The X-ray imaging system is then defined in the file *defineSystem.py* and images generated by running the file.

## How does it work?

The system can be divide into three parts: X-ray source, object and camera.
Simple outline of the system: 
![System](/images/systemGIT.pdf)

The X-ray source is defined as a point soure emitting X-rays distrubted in relation to a given energy spectrum

The objects are defined as voxels, where each voxels carries a value reffering it to a specific material. The objects are then projected unto a desired position in the system through a Field of Viev (**FOV**). 

The camera is defined as a grid with the desired resolution and pixel size.

The X-ray paths from the source to every independent pixel is then found in the FOV, through the use of Bresenham's linealgorithm. 


## List of variables: 

Variable | Description
------------ | -------------
d1 | Distance from point source to bottom of the FOV.
d2 | Distance from bottom of the FOV to the camera.
voxelSizeD | The physical size of one element in the object and FOV.
pixelArea | The physical area of one pixel in the CCD array.
gridCCD | The camera resolution ie. the amount of pixels.
Nsubpixels | THe amount of different rays hitting one pixel.
photonosRay | The amount of photons emitted in each ray path.
saturation | The threshold value for the amount of photons in each pixel.
spectrum | The X-ray source spectrum given as a probability distribution.
Emin, Estep, Emax | The enery range of the photonos generated in the system.
Nframes | The amout of images to generate.
Nsubframes | The amount of subframes contributing to a single frame.
moveSTep | The translation of the object in the FOV per subframe.
moveStart | The placemente of object in the first frame.

## Small example
Example of an X-ray image of the Standford Bunny created through **Xsim**:
 
![X-ray bunny](/results/bunny/CCDreads/bunny1.png, width=100 height=100)
